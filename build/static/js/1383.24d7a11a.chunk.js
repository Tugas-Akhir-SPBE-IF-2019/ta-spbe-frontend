"use strict";(self.webpackChunktugas_akhir_spbe=self.webpackChunktugas_akhir_spbe||[]).push([[1383],{1383:function(e,n,t){t.r(n),t.d(n,{LoginContainer:function(){return k},default:function(){return S}});var o=t(1413),r=t(5671),i=t(3144),u=t(7326),c=t(136),s=t(1129),a=t(2791),l=t(8687),d=function(e){var n;return null!==e&&void 0!==e&&null!==(n=e.loginReducer)&&void 0!==n&&n.loginMessage?e.loginReducer.loginMessage:null},f=function(e){var n;return null!==e&&void 0!==e&&null!==(n=e.loginReducer)&&void 0!==n&&n.institutionData?e.loginReducer.institutionData:[]},p=t(5102),v=t(5872),h=t(184),g=(0,a.lazy)((function(){return t.e(8580).then(t.bind(t,1149))})),k=function(e){(0,c.Z)(t,e);var n=(0,s.Z)(t);function t(e){var o;return(0,r.Z)(this,t),(o=n.call(this,e)).state={access_token:""},o.handleLoginState=o.handleLoginState.bind((0,u.Z)(o)),o}return(0,i.Z)(t,[{key:"componentDidMount",value:function(){this.props.authToken&&this.props.history.replace("/dashboard")}},{key:"componentDidUpdate",value:function(e,n){var t=this.props,o=t.loginMessageResponse,r=t.institutionDataResponse,i=this.state.access_token;n.access_token!==i&&this.props.initiateGoogleLogin(this.state),e.loginMessageResponse!==o&&o.access_token&&o.refresh_token&&(localStorage.setItem("AUTH_TOKEN",o.access_token.token),localStorage.setItem("REFRESH_TOKEN",o.refresh_token.token),this.props.getProfileInstitutionData()),e.institutionDataResponse!==r&&(0!==r.length?this.props.history.replace("/dashboard"):this.props.history.replace("/edit-profile/institution"))}},{key:"handleLoginState",value:function(e){this.setState((0,o.Z)((0,o.Z)({},this.state),{},{access_token:e}))}},{key:"render",value:function(){return(0,h.jsx)(v.rg,{clientId:"657950965679-e0t64efubu8769a9du5c09vkke359ek9.apps.googleusercontent.com",children:(0,h.jsx)(g,{handleLoginState:this.handleLoginState})})}}]),t}(a.PureComponent);var S=(0,l.$j)((function(e){return{loginMessageResponse:d(e),institutionDataResponse:f(e)}}),(function(e){return{initiateGoogleLogin:function(n){return e((0,p.Cb)(n))},getProfileInstitutionData:function(){return e((0,p.v2)())}}}))(k)},5872:function(e,n,t){t.d(n,{Nq:function(){return d},rg:function(){return a}});var o=t(1413),r=t(5987),i=t(885),u=t(2791),c=["flow","scope","onSuccess","onError","onNonOAuthError","overrideScope"];var s=(0,u.createContext)(null);function a(e){var n=e.clientId,t=e.onScriptLoadSuccess,o=e.onScriptLoadError,r=e.children,c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.onScriptLoadSuccess,t=e.onScriptLoadError,o=(0,u.useState)(!1),r=(0,i.Z)(o,2),c=r[0],s=r[1],a=(0,u.useRef)(n);a.current=n;var l=(0,u.useRef)(t);return l.current=t,(0,u.useEffect)((function(){var e=document.createElement("script");return e.src="https://accounts.google.com/gsi/client",e.async=!0,e.defer=!0,e.onload=function(){var e;s(!0),null===(e=a.current)||void 0===e||e.call(a)},e.onerror=function(){var e;s(!1),null===(e=l.current)||void 0===e||e.call(l)},document.body.appendChild(e),function(){document.body.removeChild(e)}}),[]),c}({onScriptLoadSuccess:t,onScriptLoadError:o}),a=(0,u.useMemo)((function(){return{clientId:n,scriptLoadedSuccessfully:c}}),[n,c]);return u.createElement(s.Provider,{value:a},r)}function l(){var e=(0,u.useContext)(s);if(!e)throw new Error("Google OAuth components must be used within GoogleOAuthProvider");return e}function d(e){var n=e.flow,t=void 0===n?"implicit":n,i=e.scope,s=void 0===i?"":i,a=e.onSuccess,d=e.onError,f=e.onNonOAuthError,p=e.overrideScope,v=(0,r.Z)(e,c),h=l(),g=h.clientId,k=h.scriptLoadedSuccessfully,S=(0,u.useRef)(),m=(0,u.useRef)(a);m.current=a;var R=(0,u.useRef)(d);R.current=d;var b=(0,u.useRef)(f);b.current=f,(0,u.useEffect)((function(){var e;if(k){var n="implicit"===t?"initTokenClient":"initCodeClient",r=null===(e=window.google)||void 0===e?void 0:e.accounts.oauth2[n]((0,o.Z)({client_id:g,scope:p?s:"openid profile email ".concat(s),callback:function(e){var n,t;if(e.error)return null===(n=R.current)||void 0===n?void 0:n.call(R,e);null===(t=m.current)||void 0===t||t.call(m,e)},error_callback:function(e){var n;null===(n=b.current)||void 0===n||n.call(b,e)}},v));S.current=r}}),[g,k,t,s]);var E=(0,u.useCallback)((function(e){var n;return null===(n=S.current)||void 0===n?void 0:n.requestAccessToken(e)}),[]),L=(0,u.useCallback)((function(){var e;return null===(e=S.current)||void 0===e?void 0:e.requestCode()}),[]);return"implicit"===t?E:L}}}]);
//# sourceMappingURL=1383.24d7a11a.chunk.js.map